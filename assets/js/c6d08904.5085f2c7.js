"use strict";(self.webpackChunkbfluence_docs=self.webpackChunkbfluence_docs||[]).push([[453],{7396:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"endpoints/post-community-transaction","title":"POST /community_transaction","description":"Endpoint: POST /communities/hub/client//communitytransaction","source":"@site/docs/endpoints/post-community-transaction.md","sourceDirName":"endpoints","slug":"/endpoints/post-community-transaction","permalink":"/bfluence-docs/docs/endpoints/post-community-transaction","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"post-community-transaction","title":"POST /community_transaction","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"GET /get-bflus","permalink":"/bfluence-docs/docs/endpoints/get-bflus"},"next":{"title":"Responsabilidades","permalink":"/bfluence-docs/docs/responsabilidades"}}');var o=s(4848),r=s(8453);const d={id:"post-community-transaction",title:"POST /community_transaction",sidebar_position:2},a=void 0,t={},c=[{value:"Endpoint: <code>POST /communities/hub/client/{client_id}/community_transaction</code>",id:"endpoint-post-communitieshubclientclient_idcommunity_transaction",level:3},{value:"Finalidade",id:"finalidade",level:3},{value:"Endpoint",id:"endpoint",level:3},{value:"Headers obrigat\xf3rios",id:"headers-obrigat\xf3rios",level:3},{value:"Corpo da requisi\xe7\xe3o (JSON)",id:"corpo-da-requisi\xe7\xe3o-json",level:3},{value:"\ud83e\uddfe Descri\xe7\xe3o dos campos",id:"-descri\xe7\xe3o-dos-campos",level:2},{value:"Resposta esperada",id:"resposta-esperada",level:3},{value:"Valida\xe7\xf5es realizadas pela Bfluence",id:"valida\xe7\xf5es-realizadas-pela-bfluence",level:3},{value:"Observa\xe7\xf5es",id:"observa\xe7\xf5es",level:3},{value:"Sobre o processamento ass\xedncrono",id:"sobre-o-processamento-ass\xedncrono",level:3}];function l(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h3,{id:"endpoint-post-communitieshubclientclient_idcommunity_transaction",children:["Endpoint: ",(0,o.jsx)(n.code,{children:"POST /communities/hub/client/{client_id}/community_transaction"})]}),"\n",(0,o.jsxs)(n.p,{children:["Este endpoint permite que a comunidade envie transa\xe7\xf5es comissionadas ",(0,o.jsx)(n.strong,{children:"j\xe1 calculadas"})," para a Bfluence, de forma segura e ass\xedncrona."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"finalidade",children:"Finalidade"}),"\n",(0,o.jsx)(n.p,{children:"Registrar na Bfluence:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"O valor comissionado de uma venda"}),"\n",(0,o.jsx)(n.li,{children:"O cupom utilizado"}),"\n",(0,o.jsx)(n.li,{children:"O influenciador (BFLU) respons\xe1vel"}),"\n",(0,o.jsx)(n.li,{children:"As datas de cria\xe7\xe3o e atualiza\xe7\xe3o da transa\xe7\xe3o"}),"\n"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["A ",(0,o.jsx)(n.strong,{children:"l\xf3gica de c\xe1lculo da comiss\xe3o"})," \xe9 totalmente de responsabilidade da comunidade integradora."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-http",children:"POST /communities/hub/client/{client_id}/community_transaction\n"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["O par\xe2metro ",(0,o.jsx)(n.code,{children:"client_id"})," \xe9 obrigat\xf3rio e faz parte da rota."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"headers-obrigat\xf3rios",children:"Headers obrigat\xf3rios"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Header"}),(0,o.jsx)(n.th,{children:"Tipo"}),(0,o.jsx)(n.th,{children:"Obrigat\xf3rio"}),(0,o.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,o.jsx)(n.tbody,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"Authorization"})}),(0,o.jsx)(n.td,{children:"string"}),(0,o.jsx)(n.td,{children:"Sim"}),(0,o.jsx)(n.td,{children:"Token JWT no formato Bearer"})]})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"corpo-da-requisi\xe7\xe3o-json",children:"Corpo da requisi\xe7\xe3o (JSON)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "community_bflu_id": "0001",\n  "description": "Venda de produto XPTO",\n  "total_amount": 45.50,\n  "sold_value": 150.00,\n  "coupon_name": "GLAM123",\n  "date_created": "2025-05-01T10:00:00Z",\n  "date_updated": "2025-05-01T10:01:00Z"\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-descri\xe7\xe3o-dos-campos",children:"\ud83e\uddfe Descri\xe7\xe3o dos campos"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Campo"}),(0,o.jsx)(n.th,{children:"Tipo"}),(0,o.jsx)(n.th,{children:"Obrigat\xf3rio"}),(0,o.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"community_bflu_id"})}),(0,o.jsx)(n.td,{children:"string"}),(0,o.jsx)(n.td,{children:"Sim"}),(0,o.jsx)(n.td,{children:"ID do influenciador respons\xe1vel pela transa\xe7\xe3o"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"description"})}),(0,o.jsx)(n.td,{children:"string"}),(0,o.jsx)(n.td,{children:"Sim"}),(0,o.jsx)(n.td,{children:"Breve descri\xe7\xe3o da transa\xe7\xe3o"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"total_amount"})}),(0,o.jsx)(n.td,{children:"decimal"}),(0,o.jsx)(n.td,{children:"Sim"}),(0,o.jsx)(n.td,{children:"Valor da comiss\xe3o calculado pela comunidade"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"sold_value"})}),(0,o.jsx)(n.td,{children:"decimal"}),(0,o.jsx)(n.td,{children:"N\xe3o"}),(0,o.jsx)(n.td,{children:"Valor total da venda (opcional para relat\xf3rios)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"coupon_name"})}),(0,o.jsx)(n.td,{children:"string"}),(0,o.jsx)(n.td,{children:"Sim"}),(0,o.jsx)(n.td,{children:"Cupom utilizado na venda"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"date_created"})}),(0,o.jsx)(n.td,{children:"ISODate"}),(0,o.jsx)(n.td,{children:"Sim"}),(0,o.jsx)(n.td,{children:"Data de cria\xe7\xe3o da transa\xe7\xe3o"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"date_updated"})}),(0,o.jsx)(n.td,{children:"ISODate"}),(0,o.jsx)(n.td,{children:"Sim"}),(0,o.jsx)(n.td,{children:"\xdaltima atualiza\xe7\xe3o da transa\xe7\xe3o"})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"resposta-esperada",children:"Resposta esperada"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "message": "Transa\xe7\xe3o registrada com sucesso"\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"valida\xe7\xf5es-realizadas-pela-bfluence",children:"Valida\xe7\xf5es realizadas pela Bfluence"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Campos obrigat\xf3rios presentes e com tipos corretos"}),"\n",(0,o.jsxs)(n.li,{children:["Formato das datas ",(0,o.jsx)(n.code,{children:"ISODate"})," v\xe1lido"]}),"\n",(0,o.jsxs)(n.li,{children:["Relacionamento com um BFLU j\xe1 sincronizado via ",(0,o.jsx)(n.code,{children:"GET"})]}),"\n"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"A Bfluence n\xe3o recalcula valores."})," Apenas persiste os dados enviados pela comunidade."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"observa\xe7\xf5es",children:"Observa\xe7\xf5es"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"O envio pode ser feito de forma ass\xedncrona ou em lotes individuais."}),"\n",(0,o.jsx)(n.li,{children:"Campos incorretos ser\xe3o ignorados ou retornar\xe3o erro 400."}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"sobre-o-processamento-ass\xedncrono",children:"Sobre o processamento ass\xedncrono"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["O envio da transa\xe7\xe3o ocorre via ",(0,o.jsx)(n.strong,{children:"mensageria (fila)"}),", o que significa que:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["A API da Bfluence ",(0,o.jsx)(n.strong,{children:"confirma apenas o recebimento"})," da transa\xe7\xe3o via HTTP (",(0,o.jsx)(n.code,{children:"200 OK"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["O processamento interno (valida\xe7\xe3o, persist\xeancia) ocorre ",(0,o.jsx)(n.strong,{children:"posteriormente"}),", em segundo plano"]}),"\n",(0,o.jsx)(n.li,{children:"O parceiro n\xe3o precisa aguardar a conclus\xe3o do processamento para seguir o fluxo"}),"\n",(0,o.jsxs)(n.li,{children:["\xc9 recomendado implementar ",(0,o.jsx)(n.strong,{children:"retries"}),", monitoramento e logs locais"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Esse modelo garante escalabilidade, isolamento de falhas e robustez no tr\xe1fego de grandes volumes de transa\xe7\xf5es."}),"\n",(0,o.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var i=s(6540);const o={},r=i.createContext(o);function d(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);